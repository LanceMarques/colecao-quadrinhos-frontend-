<mt-criar-emprestimo></mt-criar-emprestimo>
<section class="content-header">
  <h1>
    Todos os Empréstimos
  </h1>
  <a class="search-link pull-right">
    <a data-toggle="modal" data-target="#modalCriarEmprestimo">
      <i class="fa fa-plus-circle"></i>
    </a>
  </a>
</section>
<table class="table table-striped table-dark table-main">
  <thead>
    <tr>
      <th scope="col">Volumes</th>
      <th scope="col">Amigo</th>
      <th scope="col">Data de Realização</th>
      <th scope="col">Data de Devolução</th>
      <th scope="col">Status</th>
      <th scope="col">Ações</th>
    </tr>
  </thead>
  <tbody>
    <tr
      data-toggle="collapse"
      data-target="#demo1"
      class="accordion-toggle"
      *ngFor="let emprestimo of emprestimos"
    >
      <td>
        <a>
          <i
            #openbutton
            class="fa fa-th-list"
            (click)="onDetalhesEmprestimo(emprestimo.quadrinhos)"
            aria-hidden="true"
          ></i>
        </a>
      </td>
      <td>{{ emprestimo.amigo.nome }}</td>
      <td>{{ emprestimo.dataRealizacao }}</td>
      <td>{{ emprestimo.dataDevolucao }}</td>
      <td>{{ emprestimo.statusEmprestimo }}</td>
      <td>
        <i
          class="fa fa-retweet"
          *ngIf="emprestimo.statusEmprestimo !== 'DEVOLVIDO'"
          (click)="devolver(emprestimo.id)"
        ></i>

        <i
          class="fa fa-trash"
          (click)="excluir(emprestimo.id)"
          aria-hidden="true"
        ></i>
      </td>
    </tr>
    <tr>
      <td colspan="12" class="hiddenRow">
        <div class="accordian-body collapse" id="demo1">
          <table class="table table-collapsed">
            <tbody>
              <tr>
                <div *ngFor="let volume of volumes" class="col-md-6 col-xs-12">
                  <mt-item-volume
                    [volume]="volume"
                    [mostrarAcoes]="false"
                  ></mt-item-volume>
                </div>
              </tr>
            </tbody>
          </table>
        </div>
      </td>
    </tr>

    <tr *ngIf="!emprestimos.length">
      <td colspan="6">
        <div class="msg-erro">
          Nenhum emprestimo cadastrado até o momento.
        </div>
      </td>
    </tr>
  </tbody>
</table>
